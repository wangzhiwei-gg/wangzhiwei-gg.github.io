<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}


			.clearfix::after {
				content: '';
				display: block;
				width: 0;
				height: 0;
				visibility: hidden;
				clear: both;
			}

			.clearfix {
				zoom: 1;
			}

			ul,
			ol {
				list-style-type: none;
			}

			img {
				display: block;
			}

			a {
				text-decoration: none;
				color: #000000;
			}

			em,
			i {
				font-style: normal;
			}

			.container {}

			.header {
				text-align: center;
				background: pink;
				margin: 0 auto;
			}

			.header ul {
				display: inline-block;
			}

			.header ul li {
				float: left;
				padding: 8px 15px;
				font-size: 21px;
				font-weight: 500;
			}

			.content {
				min-height: 600px;
				background: #00FF00;
			}

			.in_so {
				box-sizing: border-box;
				padding-top: 30px;
			}

			.in_so input {
				width: 80%;
				display: block;
				margin: 0 auto;
				height: 60px;
			}

			.so_it {
				width: 80%;
				margin: 0 10%;
			}

			.so_it .odiv {
				float: left;
				padding: 5px 10px;
				border: 1px solid #000000;
				margin-right: 20px;
				margin-top: 20px;
			}

			.so_op p {
				line-height: 33px;
				padding-left: 3%;
			}

			.so_op {
				padding-top: 15px;
			}

			.footer {
				min-height: 65px;
				background: #00FFFF;
				padding-top: 10px;
			}

			audio {
				display: block;
				margin: 0 auto;
				box-sizing: border-box;
			}
		</style>
	</head>
	<body>
		<div id="box">
			<div class="container">
				<div class="header">
					<ul class="clearfix">
						<li><a href="#/">首页</a></li>
						<li><a href="#/no2">歌单页</a></li>
						<li><a href="#/no3">歌手页</a></li>
						<li><a href="#/no4">排行榜</a></li>
						<li><a href="#/no5">播放列</a></li>
					</ul>
				</div>
				<div class="content">
					<keep-alive>
						<router-view></router-view>
					</keep-alive>
				</div>
				<div class="footer clearfix">
					<audio :src="src" controls autoplay></audio>
				</div>
			</div>
		</div>
		<template id="no1">
			<div>
				<div class="in_so">
					<input @change="so" type="text" v-model="value" placeholder="搜索" />
					<div class="so_it">
						<div class="clearfix">
							<div v-for=" i in data.hotkey" class="odiv" @click="hoke(i.k)">
								{{i.k}}
							</div>
						</div>
						<div class="
							 so_op">
							<!-- @click='chazhao(b)' -->
							<P v-for="b in sos">
								<a :href="'#/no5/'+b.songmid+'/'+b.songname">
									<em>{{b.songname}}</em><span>{{b.albumname}}</span>
								</a>
							</P>
						</div>

					</div>
				</div>
			</div>
		</template>
		<template id="no2">
			<div>
				<p style="text-align: center;">加载中。。。</p>
			</div>
		</template>
		<template id="no3">
			<div>
				<div>
					<p style="background: #CCCCCC;margin-left: 10%;margin-bottom: 10px;line-height: 50px;margin-top: 20px;" v-for="i in data.list">
						<a :href="'#/no6/'+i.Fsinger_mid">
							{{i.Fsinger_name}}
						</a>
					</p>
				</div>
			</div>
		</template>
		<template id="no4">
			<div>
				<div class="clearfix">
					<div style="width: 200px;height: 250px;color: #FFFFFF;background: black;float: left;margin: 20px;overflow: hidden;"
					 v-for="i in data">
						<a :href="'#/no7/'+i.id">
							<p style="margin: 20px;text-align: center;background: #CCCCCC;font-size: 25px;color: #FFFFFF;">{{i.topTitle}}</p>
							<p style="padding-left: 20px;margin-bottom: 10px;color: #FFFFFF;" v-for="b in i.songList">
								{{b.songname}}{{b.singername}}
							</p>
						</a>
					</div>
				</div>
			</div>
		</template>
		<template id="no5">
			<div>
				<p style="line-height: 50px;margin-left: 100px;background: #269ABC;margin-bottom: 20px;" v-for="i in arr">{{i}}</p>
			</div>
		</template>
		<template id="aa">
			<div>
				<div style="margin: 0 auto;">
					<div style="background: #CCCCCC;margin: 10px 10%;line-height: 50px;" v-for="i in data">
						<a :href="'#/no5/'+i.data.songmid+'/'+i.data.songname">
							{{i.data.albumname}}
							<span style="display: inline-block;margin: 10px;" v-for="b in i.data.singer">{{b.name}}</span>
						</a>
					</div>
				</div>
			</div>
		</template>
		<template id="bb">
			<div>
				<div style="margin: 10px 10%;background: #00FFFF;" v-for="i in data.list">
					<a :href="'#/no5/'+i.musicData.songmid+'/'+i.musicData.songname">
						{{i.musicData.songname}}
						{{i.musicData.songmid}}
						<span style="display: inline-block;margin: 10px;" v-for="b in i.musicData.singer">{{b.name}}</span>
					</a>
				</div>
			</div>
		</template>
	</body>
	<script src="vue.js" type="text/javascript" charset="utf-8"></script>
	<script src="vue-router.js" type="text/javascript" charset="utf-8"></script>
	<script src="vue-resource.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		var router = new VueRouter({
			routes: [{
					path: '/',
					component: {
						template: '#no1',
						data() {
							return {
								data: '',
								value: '',
								sos: '',
								uid: ''
							}
						},
						created() {
							this.$http.jsonp(
								'https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg?g_tk=5381&uin=0&format=jsonp&jsonpCallback=callback&inCharset=utf-8&outCharset=utf-8&notice=0&platform=h5&needNewCode=1&_=1513317614040', {
									jsonpCallback: 'callback',
								}).then((data) => {
								this.data = data.data.data
								// console.log(data.data)
							})
						},
						methods: {
							so() {
								this.$http.jsonp(
									`https://c.y.qq.com/soso/fcgi-bin/client_search_cp?g_tk=5381&p=1&n=10&w=${this.value}&format=jsonp&jsonpCallback=callback&loginUin=0&hostUin=0&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0&remoteplace=txt.yqq.song&t=0&aggr=1&cr=1&catZhida=1&flag_qc=0`, {
										w: this.value,
										p: 1,
										n: 10,
										jsonpCallback: 'callback',
									}).then((data) => {
									this.sos = data.data.data.song.list
									console.log(data.data.data.song.list)
								})
							},
							hoke(a) {
								this.value = a;
								this.so();
							},
							// chazhao(item) {
							// 	console.log(item.songmid)
							// 	this.uid = item.songname;
							// 	this.$http.jsonp(
							// 		'https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg?g_tk=1278911659&hostUin=0&format=jsonp&callback=callback&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0&cid=205361747&uin=0&songmid=' +
							// 		item.songmid + '&filename=C400' + item.songmid + '.m4a&guid=3655047200', {
							// 			callback: 'callback',
							// 		}).then((BigData) => {
							// 		console.log(BigData)
							// 		var oaudio = document.querySelector('audio')
							// 		oaudio.src =
							// 			`http://dl.stream.qqmusic.qq.com/${BigData.data.data.items[0].filename}?vkey=${BigData.data.data.items[0].vkey}&guid=3655047200&fromtag=66`
							// 		console.log(oaudio)
							// 	})
							// },
						}

					},
				},
				{
					path: '/no2',
					component: {
						template: '#no2',
					}
				},
				{
					path: '/no3',
					component: {
						template: '#no3',
						data() {
							return {
								data: '',
							}
						},
						created() {
							this.$http.jsonp(
								'https://c.y.qq.com/v8/fcg-bin/v8.fcg?channel=singer&page=list&key=all_all_all&pagesize=100&pagenum=1&g_tk=5381&jsonpCallback=callback&loginUin=0&hostUin=0&format=jsonp&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0', {
									jsonpCallback: 'callback',
								}).then((data) => {
								this.data = data.data.data
								console.log(data.data.data)
							})
						},
					}
				},
				{
					path: '/no4',
					component: {
						template: '#no4',
						data() {
							return {
								data: '',
							}
						},
						created() {
							this.$http.jsonp(
								'https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg?g_tk=5381&uin=0&format=jsonp&jsonpCallback=callback&inCharset=utf-8&outCharset=utf-8&notice=0&platform=h5&needNewCode=1&_=1512554796112', {
									jsonpCallback: 'callback',
								}).then((data) => {
								this.data = data.data.data.topList
								console.log(data.data.data)
							})
						},
					}
				},
				{
					path: '/no5/:songmid/:songname',
					component: {
						template: '#no5',
						data() {
							return {
								songmid: '',
								songname: '',
								arr: [],
							}
						},
						created() {
							this.songmid = this.$route.params.songmid
							this.songname = this.$route.params.songname
							if (this.$route.params.songmid) {
								if (this.$route.params.songmid != 0 || this.$route.params.songname != 0) {
									this.arr.push(this.$route.params.songname)
									console.log(this.$route.params.songname)
								}
							}
						},
						watch: {
							'$route.params'(a) {
								this.songmid = this.$route.params.songmid
								this.songname = this.$route.params.songname
								console.log(this.$route.params)
								if (this.$route.params.songmid) {
									if (this.$route.params.songmid != 0 || this.$route.params.songname != 0) {
										this.arr.push(this.$route.params.songname)
										console.log(this.arr)
									}
								}
							}
						}
						// 						created() {
						// 							this.songmid = this.$route.params.songmid
						// 							this.songname = this.$route.params.songname
						// 							if (this.$route.params.songname != '') {
						// 								this.arr.push(this.$route.params.songname)
						// 							}
						// 							console.log(this.arr)
						// 						},
						// 						watch: {
						// 							'$route.params'(a) {
						// 								console.log(this.$route.params)
						// 								this.songmid = this.$route.params.songmid
						// 								this.songname = this.$route.params.songname
						// 								if (this.$route.params.songname != '') {
						// 									this.arr.push(this.$route.params.songname)
						// 									console.log(this.arr)
						// 								}
						// 
						// 							}
						// 						}
					}
				},
				{
					path: '/no6/:path',
					component: {
						template: '#bb',
						data() {
							return {
								data: '',
								id: ''
							}
						},
						created() {
							console.log(this.$route.params.path)
							this.id = this.$route.params.path
							this.$http.jsonp(
								`https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg?g_tk=5381&jsonpCallback=callback&loginUin=0&hostUin=0&format=jsonp&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0&singermid=${this.id}&order=listen&begin=0&num=30&songstatus=1`, {
									jsonpCallback: 'callback',
								}).then((data) => {
								this.data = data.data.data
								console.log(data.data.data)
							})
						}
					}
				},
				{
					path: '/no7/:name',
					component: {
						template: '#aa',
						data() {
							return {
								data: '',
								id: ''
							}
						},
						created() {
							console.log(this.$route.params.name)
							this.id = this.$route.params.name
							this.$http.jsonp(
								`https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg?g_tk=5381&uin=0&format=jsonp&jsonpCallback=callback&inCharset=utf-8&outCharset=utf-8&notice=0&platform=h5&needNewCode=1&tpl=3&page=detail&type=top&topid=${this.id}&_=1512563984096`, {
									jsonpCallback: 'callback',
								}).then((data) => {
								this.data = data.data.songlist
								console.log(data.data.songlist)
							})
						}
					}
				},
			]
		})
		new Vue({
			el: '#box',
			data: {
				src: ''
			},
			watch: {
				'$route.params.songmid'(a) {
					if (a) {
						this.$http.jsonp(
							`https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg?g_tk=1278911659&hostUin=0&format=jsonp&callback=callback&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0&cid=205361747&uin=0&songmid=` +
							a + `&filename=C400` + a + `.m4a&guid=3655047200`, {
								jsonpCallback: 'callback'
							}).then(data => {
							this.src = `http://dl.stream.qqmusic.qq.com/` + data.data.data.items[0].filename + `?vkey=` + data.data
								.data.items[0].vkey + `&guid=3655047200&fromtag=66`;
							// console.log(this.src)
						})
					}
				}
			},
			router
		})
	</script>
</html>
